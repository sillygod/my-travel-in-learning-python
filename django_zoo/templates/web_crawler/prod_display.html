{% extends "base.html" %}


{% block webcontent %}

<!-- the following, it will show prod list here. -->
<div class="panel-group" id="accordion">
    {% for prod in prods %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse{{ forloop.counter0 }}">{{ prod.title }}</a>
            </h4>
        </div>

        <div id="collapse{{ forloop.counter0 }}" class="panel-collapse collapse">
            <div class="panel-body">
                <div class="media">
                    <div class="pull-left">
                        <img class="media-object" src="{{ prod.picture }}" alt="33">
                    </div>

                    <div style="min-width:50px;" class="media-body">
                        <ul class="list-group">
                            <li class="list-group-item">CPU: {{ prod.cpu }}</li>
                            <li class="list-group-item">記憶體: {{ prod.ram }}</li>
                            <li class="list-group-item">硬碟: {{ prod.hardware }}</li>
                            <li class="list-group-item">螢幕: {{ prod.screen }}</li>
                            <li class="list-group-item">價錢: {{ prod.price }}</li>
                            <li class="list-group-item">其它: {{ prod.else_spec }}</li>
                        </ul>
                    </div>

                    <a target="about:blank" href="{{ prod.url }}" class="btn btn-primary btn-lg" role="button">前往原網站</a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- a pagination -->
<ul class="pager">
    <li class="previous"><a href="#">&larr; Older</a></li>
    <li><a href='/home/'><span class='glyphicon glyphicon-home'></a></span></li>
    <li class="next"><a href="#">Newer &rarr;</a></li>
</ul>

{% endblock %}

{% block script %}
<script>
(function($){

    function parseURL(url){
        page = /(.*\/)([_\w]+)/.exec(url);
        latter_site = /.*\/([_\w]+)/.exec(page[1]);
        page = Number( page[2] );

        if( isNaN(page) ){
            page = 1;
        }
        return {'page': page, 'site': latter_site[1]};
    }

    $('.pager .previous').on('click', function(event){
        event.preventDefault();
        url = document.URL;
        info = parseURL(url);
        page = info['page'];
        page = page - 1;

        if(page < 1){
            page = 1;
        }

        location.href = '/'+info['site']+'/'+page+'/';
    });

    $('.pager .next').on('click', function(event){
        event.preventDefault();
        url = document.URL;
        info = parseURL(url);
        page = info['page'];
        page = page + 1;
        location.href = '/'+info['site']+'/'+page+'/';
    });

}(jQuery));

</script>
{% endblock %}